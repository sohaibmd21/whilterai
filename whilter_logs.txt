Attaching to whilter_flask_flask_app_1, whilter_flask_redis_1
[33mredis_1      |[0m 1:C 05 Feb 2025 06:13:16.104 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
[33mredis_1      |[0m 1:C 05 Feb 2025 06:13:16.104 # Redis version=7.0.6, bits=64, commit=00000000, modified=0, pid=1, just started
[33mredis_1      |[0m 1:C 05 Feb 2025 06:13:16.104 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
[33mredis_1      |[0m 1:M 05 Feb 2025 06:13:16.105 * monotonic clock: POSIX clock_gettime
[33mredis_1      |[0m 1:M 05 Feb 2025 06:13:16.106 * Running mode=standalone, port=6379.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:13:16.106 # Server initialized
[33mredis_1      |[0m 1:M 05 Feb 2025 06:13:16.106 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:13:16.106 * Ready to accept connections
[33mredis_1      |[0m 1:C 05 Feb 2025 06:18:09.233 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
[33mredis_1      |[0m 1:C 05 Feb 2025 06:18:09.233 # Redis version=7.0.6, bits=64, commit=00000000, modified=0, pid=1, just started
[33mredis_1      |[0m 1:C 05 Feb 2025 06:18:09.233 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
[33mredis_1      |[0m 1:M 05 Feb 2025 06:18:09.234 * monotonic clock: POSIX clock_gettime
[33mredis_1      |[0m 1:M 05 Feb 2025 06:18:09.235 * Running mode=standalone, port=6379.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:18:09.235 # Server initialized
[33mredis_1      |[0m 1:M 05 Feb 2025 06:18:09.235 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:18:09.236 * Ready to accept connections
[33mredis_1      |[0m 1:signal-handler (1738736608) Received SIGTERM scheduling shutdown...
[33mredis_1      |[0m 1:M 05 Feb 2025 06:23:28.622 # User requested shutdown...
[33mredis_1      |[0m 1:M 05 Feb 2025 06:23:28.622 * Saving the final RDB snapshot before exiting.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:23:28.673 * DB saved on disk
[33mredis_1      |[0m 1:M 05 Feb 2025 06:23:28.673 # Redis is now ready to exit, bye bye...
[33mredis_1      |[0m 1:C 05 Feb 2025 06:24:04.806 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
[33mredis_1      |[0m 1:C 05 Feb 2025 06:24:04.806 # Redis version=7.0.6, bits=64, commit=00000000, modified=0, pid=1, just started
[33mredis_1      |[0m 1:C 05 Feb 2025 06:24:04.806 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.806 * monotonic clock: POSIX clock_gettime
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.807 * Running mode=standalone, port=6379.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.807 # Server initialized
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.807 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.808 * Loading RDB produced by version 7.0.6
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.808 * RDB age 36 seconds
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.808 * RDB memory usage when created 0.82 Mb
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.808 * Done loading RDB, keys loaded: 0, keys expired: 0.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.808 * DB loaded from disk: 0.000 seconds
[33mredis_1      |[0m 1:M 05 Feb 2025 06:24:04.808 * Ready to accept connections
[33mredis_1      |[0m 1:C 05 Feb 2025 06:25:53.692 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
[33mredis_1      |[0m 1:C 05 Feb 2025 06:25:53.692 # Redis version=7.0.6, bits=64, commit=00000000, modified=0, pid=1, just started
[33mredis_1      |[0m 1:C 05 Feb 2025 06:25:53.692 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 * monotonic clock: POSIX clock_gettime
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 * Running mode=standalone, port=6379.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 # Server initialized
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 * Loading RDB produced by version 7.0.6
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 * RDB age 145 seconds
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 * RDB memory usage when created 0.82 Mb
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 * Done loading RDB, keys loaded: 0, keys expired: 0.
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 * DB loaded from disk: 0.000 seconds
[33mredis_1      |[0m 1:M 05 Feb 2025 06:25:53.692 * Ready to accept connections
[36mflask_app_1  |[0m  * Environment: production
[36mflask_app_1  |[0m    WARNING: This is a development server. Do not use it in a production deployment.
[36mflask_app_1  |[0m    Use a production WSGI server instead.
[36mflask_app_1  |[0m  * Debug mode: off
[36mflask_app_1  |[0m /usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py:795: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
[36mflask_app_1  |[0m   warnings.warn(
[36mflask_app_1  |[0m  * Running on all addresses.
[36mflask_app_1  |[0m    WARNING: This is a development server. Do not use it in a production deployment.
[36mflask_app_1  |[0m  * Running on http://172.18.0.3:5000/ (Press CTRL+C to quit)
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:15:44] "GET / HTTP/1.1" 200 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:15:44] "[36mGET /static/whilter_logo.png HTTP/1.1[0m" 304 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:15:44] "[36mGET /static/styles.css HTTP/1.1[0m" 304 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:15:44] "GET /static/script.js HTTP/1.1" 200 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:15:44] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:15:48] "GET / HTTP/1.1" 200 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:15:48] "[36mGET /static/styles.css HTTP/1.1[0m" 304 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:15:48] "[36mGET /static/whilter_logo.png HTTP/1.1[0m" 304 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:15:48] "[36mGET /static/script.js HTTP/1.1[0m" 304 -
[36mflask_app_1  |[0m [2025-02-05 06:16:24,045] ERROR in app: Exception on /start-task [POST]
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 357, in connect
[36mflask_app_1  |[0m     sock = self.retry.call_with_retry(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/retry.py", line 62, in call_with_retry
[36mflask_app_1  |[0m     return do()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 358, in <lambda>
[36mflask_app_1  |[0m     lambda: self._connect(), lambda error: self.disconnect(error)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 698, in _connect
[36mflask_app_1  |[0m     for res in socket.getaddrinfo(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/socket.py", line 967, in getaddrinfo
[36mflask_app_1  |[0m     for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
[36mflask_app_1  |[0m socket.gaierror: [Errno -3] Temporary failure in name resolution
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m During handling of the above exception, another exception occurred:
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 119, in reconnect_on_error
[36mflask_app_1  |[0m     yield
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 169, in _consume_from
[36mflask_app_1  |[0m     self._pubsub.subscribe(key)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 957, in subscribe
[36mflask_app_1  |[0m     ret_val = self.execute_command("SUBSCRIBE", *new_channels.keys())
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 786, in execute_command
[36mflask_app_1  |[0m     self.connection = self.connection_pool.get_connection(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 1422, in get_connection
[36mflask_app_1  |[0m     connection.connect()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 363, in connect
[36mflask_app_1  |[0m     raise ConnectionError(self._error_message(e))
[36mflask_app_1  |[0m redis.exceptions.ConnectionError: Error -3 connecting to redis-server:6379. Temporary failure in name resolution.
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m During handling of the above exception, another exception occurred:
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 357, in connect
[36mflask_app_1  |[0m     sock = self.retry.call_with_retry(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/retry.py", line 62, in call_with_retry
[36mflask_app_1  |[0m     return do()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 358, in <lambda>
[36mflask_app_1  |[0m     lambda: self._connect(), lambda error: self.disconnect(error)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 698, in _connect
[36mflask_app_1  |[0m     for res in socket.getaddrinfo(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/socket.py", line 967, in getaddrinfo
[36mflask_app_1  |[0m     for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
[36mflask_app_1  |[0m socket.gaierror: [Errno -3] Temporary failure in name resolution
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m During handling of the above exception, another exception occurred:
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/kombu/connection.py", line 472, in _reraise_as_library_errors
[36mflask_app_1  |[0m     yield
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/app/base.py", line 787, in send_task
[36mflask_app_1  |[0m     self.backend.on_task_call(P, task_id)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 365, in on_task_call
[36mflask_app_1  |[0m     self.result_consumer.consume_from(task_id)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 161, in consume_from
[36mflask_app_1  |[0m     return self.start(task_id)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 139, in start
[36mflask_app_1  |[0m     self._consume_from(initial_task_id)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 168, in _consume_from
[36mflask_app_1  |[0m     with self.reconnect_on_error():
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
[36mflask_app_1  |[0m     self.gen.throw(typ, value, traceback)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 122, in reconnect_on_error
[36mflask_app_1  |[0m     self._ensure(self._reconnect_pubsub, ())
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 376, in ensure
[36mflask_app_1  |[0m     return retry_over_time(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/kombu/utils/functional.py", line 318, in retry_over_time
[36mflask_app_1  |[0m     return fun(*args, **kwargs)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 106, in _reconnect_pubsub
[36mflask_app_1  |[0m     metas = self.backend.client.mget(self.subscribed_to)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/commands/core.py", line 2009, in mget
[36mflask_app_1  |[0m     return self.execute_command("MGET", *args, **options)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 559, in execute_command
[36mflask_app_1  |[0m     return self._execute_command(*args, **options)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 565, in _execute_command
[36mflask_app_1  |[0m     conn = self.connection or pool.get_connection(command_name, **options)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 1422, in get_connection
[36mflask_app_1  |[0m     connection.connect()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 363, in connect
[36mflask_app_1  |[0m     raise ConnectionError(self._error_message(e))
[36mflask_app_1  |[0m redis.exceptions.ConnectionError: Error -3 connecting to redis-server:6379. Temporary failure in name resolution.
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m The above exception was the direct cause of the following exception:
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 2073, in wsgi_app
[36mflask_app_1  |[0m     response = self.full_dispatch_request()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1518, in full_dispatch_request
[36mflask_app_1  |[0m     rv = self.handle_user_exception(e)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1516, in full_dispatch_request
[36mflask_app_1  |[0m     rv = self.dispatch_request()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1502, in dispatch_request
[36mflask_app_1  |[0m     return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
[36mflask_app_1  |[0m   File "/app/app.py", line 47, in start_task
[36mflask_app_1  |[0m     task = enhance_prompt.apply_async(args=[prompt])
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/app/task.py", line 575, in apply_async
[36mflask_app_1  |[0m     return app.send_task(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/app/base.py", line 785, in send_task
[36mflask_app_1  |[0m     with P.connection._reraise_as_library_errors():
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
[36mflask_app_1  |[0m     self.gen.throw(typ, value, traceback)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/kombu/connection.py", line 476, in _reraise_as_library_errors
[36mflask_app_1  |[0m     raise ConnectionError(str(exc)) from exc
[36mflask_app_1  |[0m kombu.exceptions.OperationalError: Error -3 connecting to redis-server:6379. Temporary failure in name resolution.
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:16:24] "[35m[1mPOST /start-task HTTP/1.1[0m" 500 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:16:31] "[36mGET /static/styles.css HTTP/1.1[0m" 304 -
[36mflask_app_1  |[0m  * Environment: production
[36mflask_app_1  |[0m    WARNING: This is a development server. Do not use it in a production deployment.
[36mflask_app_1  |[0m    Use a production WSGI server instead.
[36mflask_app_1  |[0m  * Debug mode: off
[36mflask_app_1  |[0m /usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py:795: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
[36mflask_app_1  |[0m   warnings.warn(
[36mflask_app_1  |[0m  * Running on all addresses.
[36mflask_app_1  |[0m    WARNING: This is a development server. Do not use it in a production deployment.
[36mflask_app_1  |[0m  * Running on http://172.18.0.3:5000/ (Press CTRL+C to quit)
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:20:01] "GET / HTTP/1.1" 200 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:20:01] "GET /static/styles.css HTTP/1.1" 200 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:20:01] "GET /static/whilter_logo.png HTTP/1.1" 200 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:20:01] "GET /static/script.js HTTP/1.1" 200 -
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:20:01] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
[36mflask_app_1  |[0m [2025-02-05 06:20:34,208] ERROR in app: Exception on /start-task [POST]
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 357, in connect
[36mflask_app_1  |[0m     sock = self.retry.call_with_retry(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/retry.py", line 62, in call_with_retry
[36mflask_app_1  |[0m     return do()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 358, in <lambda>
[36mflask_app_1  |[0m     lambda: self._connect(), lambda error: self.disconnect(error)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 698, in _connect
[36mflask_app_1  |[0m     for res in socket.getaddrinfo(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/socket.py", line 967, in getaddrinfo
[36mflask_app_1  |[0m     for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
[36mflask_app_1  |[0m socket.gaierror: [Errno -3] Temporary failure in name resolution
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m During handling of the above exception, another exception occurred:
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 119, in reconnect_on_error
[36mflask_app_1  |[0m     yield
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 169, in _consume_from
[36mflask_app_1  |[0m     self._pubsub.subscribe(key)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 957, in subscribe
[36mflask_app_1  |[0m     ret_val = self.execute_command("SUBSCRIBE", *new_channels.keys())
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 786, in execute_command
[36mflask_app_1  |[0m     self.connection = self.connection_pool.get_connection(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 1422, in get_connection
[36mflask_app_1  |[0m     connection.connect()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 363, in connect
[36mflask_app_1  |[0m     raise ConnectionError(self._error_message(e))
[36mflask_app_1  |[0m redis.exceptions.ConnectionError: Error -3 connecting to redis-server:6379. Temporary failure in name resolution.
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m During handling of the above exception, another exception occurred:
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 357, in connect
[36mflask_app_1  |[0m     sock = self.retry.call_with_retry(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/retry.py", line 62, in call_with_retry
[36mflask_app_1  |[0m     return do()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 358, in <lambda>
[36mflask_app_1  |[0m     lambda: self._connect(), lambda error: self.disconnect(error)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 698, in _connect
[36mflask_app_1  |[0m     for res in socket.getaddrinfo(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/socket.py", line 967, in getaddrinfo
[36mflask_app_1  |[0m     for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
[36mflask_app_1  |[0m socket.gaierror: [Errno -3] Temporary failure in name resolution
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m During handling of the above exception, another exception occurred:
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/kombu/connection.py", line 472, in _reraise_as_library_errors
[36mflask_app_1  |[0m     yield
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/app/base.py", line 787, in send_task
[36mflask_app_1  |[0m     self.backend.on_task_call(P, task_id)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 365, in on_task_call
[36mflask_app_1  |[0m     self.result_consumer.consume_from(task_id)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 161, in consume_from
[36mflask_app_1  |[0m     return self.start(task_id)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 139, in start
[36mflask_app_1  |[0m     self._consume_from(initial_task_id)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 168, in _consume_from
[36mflask_app_1  |[0m     with self.reconnect_on_error():
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
[36mflask_app_1  |[0m     self.gen.throw(typ, value, traceback)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 122, in reconnect_on_error
[36mflask_app_1  |[0m     self._ensure(self._reconnect_pubsub, ())
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 376, in ensure
[36mflask_app_1  |[0m     return retry_over_time(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/kombu/utils/functional.py", line 318, in retry_over_time
[36mflask_app_1  |[0m     return fun(*args, **kwargs)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/backends/redis.py", line 106, in _reconnect_pubsub
[36mflask_app_1  |[0m     metas = self.backend.client.mget(self.subscribed_to)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/commands/core.py", line 2009, in mget
[36mflask_app_1  |[0m     return self.execute_command("MGET", *args, **options)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 559, in execute_command
[36mflask_app_1  |[0m     return self._execute_command(*args, **options)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/client.py", line 565, in _execute_command
[36mflask_app_1  |[0m     conn = self.connection or pool.get_connection(command_name, **options)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 1422, in get_connection
[36mflask_app_1  |[0m     connection.connect()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/redis/connection.py", line 363, in connect
[36mflask_app_1  |[0m     raise ConnectionError(self._error_message(e))
[36mflask_app_1  |[0m redis.exceptions.ConnectionError: Error -3 connecting to redis-server:6379. Temporary failure in name resolution.
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m The above exception was the direct cause of the following exception:
[36mflask_app_1  |[0m 
[36mflask_app_1  |[0m Traceback (most recent call last):
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 2073, in wsgi_app
[36mflask_app_1  |[0m     response = self.full_dispatch_request()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1518, in full_dispatch_request
[36mflask_app_1  |[0m     rv = self.handle_user_exception(e)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1516, in full_dispatch_request
[36mflask_app_1  |[0m     rv = self.dispatch_request()
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1502, in dispatch_request
[36mflask_app_1  |[0m     return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
[36mflask_app_1  |[0m   File "/app/app.py", line 47, in start_task
[36mflask_app_1  |[0m     task = enhance_prompt.apply_async(args=[prompt])
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/app/task.py", line 575, in apply_async
[36mflask_app_1  |[0m     return app.send_task(
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/celery/app/base.py", line 785, in send_task
[36mflask_app_1  |[0m     with P.connection._reraise_as_library_errors():
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
[36mflask_app_1  |[0m     self.gen.throw(typ, value, traceback)
[36mflask_app_1  |[0m   File "/usr/local/lib/python3.10/site-packages/kombu/connection.py", line 476, in _reraise_as_library_errors
[36mflask_app_1  |[0m     raise ConnectionError(str(exc)) from exc
[36mflask_app_1  |[0m kombu.exceptions.OperationalError: Error -3 connecting to redis-server:6379. Temporary failure in name resolution.
[36mflask_app_1  |[0m 172.18.0.1 - - [05/Feb/2025 06:20:34] "[35m[1mPOST /start-task HTTP/1.1[0m" 500 -
[36mflask_app_1  |[0m  * Environment: production
[36mflask_app_1  |[0m    WARNING: This is a development server. Do not use it in a production deployment.
[36mflask_app_1  |[0m    Use a production WSGI server instead.
[36mflask_app_1  |[0m  * Debug mode: off
[36mflask_app_1  |[0m /usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py:795: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
[36mflask_app_1  |[0m   warnings.warn(
[36mflask_app_1  |[0m  * Running on all addresses.
[36mflask_app_1  |[0m    WARNING: This is a development server. Do not use it in a production deployment.
[36mflask_app_1  |[0m  * Running on http://172.18.0.3:5000/ (Press CTRL+C to quit)
[36mflask_app_1  |[0m  * Environment: production
[36mflask_app_1  |[0m    WARNING: This is a development server. Do not use it in a production deployment.
[36mflask_app_1  |[0m    Use a production WSGI server instead.
[36mflask_app_1  |[0m  * Debug mode: off
[36mflask_app_1  |[0m /usr/local/lib/python3.10/site-packages/huggingface_hub/file_download.py:795: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
[36mflask_app_1  |[0m   warnings.warn(
[36mflask_app_1  |[0m  * Running on all addresses.
[36mflask_app_1  |[0m    WARNING: This is a development server. Do not use it in a production deployment.
[36mflask_app_1  |[0m  * Running on http://172.18.0.3:5000/ (Press CTRL+C to quit)
Aborting.
